<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
	</head>
	<body>
		<script>
			// disable Ctrl+V for the input
			window.onload = function() {
				document.getElementById('input').onpaste = function(e) {
					e.preventDefault();
				}
			}

			var phrase = "The quick brown fox jumps over the lazy dog";
			var errorCount = 0;
			var started = false;
			var startTime, endTime;

			function getKey(event) {
				// count Backspaces and Deletes
				if (event.keyCode == 8 || event.keyCode == 46) {
					errorCount++;
					document.getElementById("errors").innerHTML = errorCount;
				}
			}

			function getInput() {
				// on user's first keydown start the clock
				if (!started) {
					startTime = new Date();
					started = true;
				}

				// check if input is complete
				var compare = phrase.localeCompare(document.getElementById("input").value);
				if (compare == 0) {
					// stop the clock and calc time in seconds
					endTime = new Date();
					var timeDiff = (endTime - startTime) / 1000;

					document.getElementById("input").disabled = true;
					document.getElementById("done").innerHTML = "Well done! Time elapsed: " + timeDiff + " seconds";
				}
			}

		</script>

		<p>Please type the phrase:
			<script>
				document.write(phrase);
			</script>
		</p>

		<input type="text" size="80" id="input" onkeydown="getKey(event)" oninput="getInput()"/>

		<p>
			<span>Num of errors: </span>
			<span id="errors"> 0 </span>
		</p>

		<p id="done"></p>


		<!--The following script records the coords of mouse on any mousemovement.
			Similarly, we can do for clicks, scroll, etc.
			Maybe a polling rate is needed, e.g. record movement every 50ms, atm it is continuous -->
		<p>Mouse:</p>

		<script>
		document.onmousemove = function(event) { getMousemove(event) };
		
		function getMousemove(e) {
			var data = "";
			data += Date.now() + " ";
			data += e.clientX + " ";
			data += e.clientY + " ";
			data += "mousemove\n";
			document.getElementById("mousemovement").innerHTML = data;
		};
		</script>
		<p id="mousemovement"></p>
	</body>
</html>
